<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anomaly Detection in Blockchain - Double Spending Attack Simulation</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script defer src="{{ url_for('static', filename='app.js') }}"></script>
</head>
<body>
  <header class="site-header">
    <div class="header-container">

      <div class="instructor-info">
        <img src="{{ url_for('static', filename='vu_logo.png') }}" alt="Virtual University Logo" class="logo">
        <p><strong>Project Instructor:</strong> Fouzia Jumani</p>
        <p>Skype: fouziajumani</p>
        <p>Email: fouziajumani@vu.edu.pk</p>
      </div>

      <div class="title-box">
        <h1>Anomaly Detection System in Blockchain</h1>
        <h2>Prototype: Double Spending Attack Simulation with SimBlock Integration</h2>
      </div>

      <div class="author-info">
        <img src="{{ url_for('static', filename='student_pic.png') }}" alt="Project Author" class="student-pic">
        <p><strong>Project Author:</strong> Eng. Muhammad Imtiaz Shaffi</p>
        <p>VU ID: BC220200917</p>
        <p>Email: bc220200917mis@vu.edu.pk</p>
      </div>
    </div>
  </header>

  <main class="container">

    <div class="header-text">
      <h2>Blockchain Anomaly Detection Prototype</h2>
      <p>This interactive prototype demonstrates a complete blockchain network with double-spending attack simulation,
         comprehensive analytics, and SimBlock P2P network integration for research and educational purposes.</p>
      </div>

    <hr> <div id="charts-dashboard"></div>

    <h3>-: Custom Blockchain Implementation :-</h3>

    <div class="section-box">
      <h4>ğŸ’¸ Create New Transaction</h4>
      <div id="tx-form">
        <div class="form-group">
          <label for="tx-sender">Sender Wallet Address:</label>
          <input type="text" id="tx-sender" placeholder="e.g., Ali" required>
        </div>
        <div class="form-group">
          <label for="tx-receiver">Receiver Wallet Address:</label>
          <input type="text" id="tx-receiver" placeholder="e.g., Babar" required>
        </div>
        <div class="form-group">
          <label for="tx-amount">Amount (coins):</label>
          <input type="number" id="tx-amount" placeholder="e.g., 10" step="any" min="0.01" required>
        </div>
        <button type="button" id="submit-tx-btn" class="primary-btn">Submit Transaction</button>
      </div>
      <pre id="tx-response" class="result-box" style="display:none;"></pre>
    </div>

    <div class="section-box">
      <h4>â›ï¸ Mine Pending Transactions</h4>
      <div class="form-group">
        <label for="miner-name">Miner Name:</label>
        <input type="text" id="miner-name" placeholder="e.g., MinerNode1">
      </div>
      <button id="mine-btn" class="primary-btn">Mine Block</button>
      <pre id="mine-response" class="result-box" style="display:none;"></pre>
    </div>

    <div class="section-box">
      <h4>ğŸ’° Current Wallet Balances</h4>
      <button id="refresh-balances-btn" class="primary-btn">Refresh Balances</button>
      <pre id="balances-output"></pre>
    </div>

    <div class="section-box">
      <h4>â›“ï¸ Blockchain Explorer</h4>
      <button id="refresh-chain-btn" class="primary-btn">Refresh Blockchain</button>
      <pre id="chain-output"></pre>
    </div>

    <hr> <div class="section-box">
      <h4>ğŸ¯ Double-Spending Attack Simulation</h4>

      <div class="attack-controls">
        <h4>ğŸ® Attack Control Panel</h4>

        <div class="control-group">
          <label>Success Probability: <span id="probability-value" class="slider-value">50%</span></label>
          <div class="slider-container">
            <input type="range" min="1" max="100" value="50"
                   oninput="updateSuccessProbability(this.value)"
                   title="Adjust base success probability">
            <small>Adjust the base probability of attack success</small>
          </div>
        </div>

        <div class="control-group">
          <label>Attacker Hash Power: <span id="hashpower-value" class="slider-value">30%</span></label>
          <div class="slider-container">
            <input type="range" min="1" max="100" value="30"
                   oninput="updateHashPower(this.value)"
                   title="Adjust attacker's hash power percentage">
            <small>Control the computational power available to the attacker</small>
          </div>
        </div>

        <div class="control-group">
          <label>Force Attack Outcome:</label>
          <div class="force-buttons">
            <button id="force-success-btn" class="force-btn" onclick="forceAttackSuccess()">
              âœ… Force Success
            </button>
            <button id="force-failure-btn" class="force-btn" onclick="forceAttackFailure()">
              âŒ Force Failure
            </button>
            <button class="force-btn" onclick="resetAttackControl()">
              ğŸ² Random Mode
            </button>
          </div>
          <small>Override probability for testing specific scenarios</small>
        </div>

        <div class="control-status">
          <strong>Current Mode:</strong>
          <span id="current-mode">RANDOM (Based on probability and hash power)</span>
        </div>
      </div>

      <div class="form-group">
        <label for="attack-attacker">Attacker Name:</label>
        <input id="attack-attacker" placeholder="e.g., Hacker">

        <label for="attack-blocks">Private Blocks to Mine:</label>
        <input id="attack-blocks" type="number" value="1" min="1" max="10">

        <label for="attack-amount">Attack Amount (coins):</label>
        <input id="attack-amount" type="number" value="10" step="any" min="0.01">
      </div>

      <button id="run-attack-btn" class="primary-btn">ğŸš€ Run Attack Simulation</button>
      <pre id="attack-output" class="result-box" style="display:none;"></pre>
    </div>


    <hr> <h3>-: P2P Network Management :-</h3>

    <div class="section-box">
      <h4>ğŸŒ P2P Network Management</h4>
      <p><strong>Dual Network Architecture:</strong></p>
      <ul>
        <li>âœ… <strong>SimBlock P2P</strong> - Advanced network simulation with realistic conditions</li>
        <li>âœ… <strong>Traditional P2P</strong> - Basic peer connectivity and consensus</li>
      </ul>

      <div class="form-group">
        <label for="peer-address">Peer Node Address:</label>
        <input type="text" id="peer-address" placeholder="http://127.0.0.1:5001" required>
      </div>

      <button id="add-peer-btn" class="primary-btn">Add Peer to Network</button>

      <div class="network-status">
        <p><strong>Current Network Status:</strong></p>
        <p>ğŸ”— SimBlock Nodes: <span id="simblock-nodes">4</span> (Simulated)</p>
        <p>ğŸ”— Traditional Peers: <span id="traditional-peers">0</span> (Connected)</p>
      </div>

      <pre id="peer-response" class="result-box" style="display:none;"></pre>
    </div>

    <div class="section-box">
      <h4>ğŸ”„ Network Consensus</h4>
      <p>Resolve conflicts with other nodes in the network using the longest chain rule.</p>
      <button id="resolve-conflicts-btn" class="primary-btn">Check Network Consensus</button>
      <pre id="consensus-response" class="result-box" style="display:none;"></pre>
    </div>


    <hr> <div class="section-box">
      <h4>ğŸ“Š Comprehensive Reporting</h4>
      <p>Generate detailed PDF reports with blockchain analytics, attack simulations, and network analysis.</p>
      <button id="download-report-btn" class="primary-btn">Download Comprehensive PDF Report</button>
      <div id="pdf-spinner" class="spinner" style="display:none;">â³ Generating PDF Report...</div>
    </div>

  </main>

  <footer class="site-footer">
    <div class="footer-container">
      <p>Â© 2025 This project is developed under the supervision of Virtual University of Pakistan</p>
      <p>Blockchain Anomaly Detection Research Project - Educational Use</p>
    </div>
  </footer>

</body>
</html>